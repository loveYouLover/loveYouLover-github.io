<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>获取ip地址</title>
</head>
<body >

</body>
<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.4.15&key=9f28d1b8394913b4719c590e0a947256&plugin=AMap.CitySearch"></script>
<script src="http://pv.sohu.com/cityjson?ie=utf-8"></script>
<script>
    //浏览器返回结果：（前提是需要有网络）
    //var returnCitySN = {"cip": "14.153.20.119", "cid": "440300", "cname": "广东省深圳市"};
    alert(returnCitySN.cip);
    AMap.plugin('AMap.CitySearch', function () {
        var citySearch = new AMap.CitySearch()
        citySearch.getCityByIp(returnCitySN.cip,function(status, result){
            console.log(status);
            console.log(result);
            alert(result.adcode)
        })
    })
</script>

</html>
